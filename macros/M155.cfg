[delayed_gcode report_temp]
initial_duration: 0
gcode:
  M105
  {% set sec = printer["gcode_macro M155"].interval %}
  UPDATE_DELAYED_GCODE ID=report_temp DURATION={sec}

[gcode_macro M155]
description: report interval
#default_parameter_S: 0
variable_interval: 0
gcode:
  {% set temp_interval = params.S|default(0)|int %}
  SET_GCODE_VARIABLE MACRO=M155 VARIABLE=interval VALUE={temp_interval}
  UPDATE_DELAYED_GCODE ID=report_temp DURATION={temp_interval}